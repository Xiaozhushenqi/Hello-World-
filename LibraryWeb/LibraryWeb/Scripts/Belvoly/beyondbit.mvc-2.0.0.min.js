/*!
 * Beyondbit Front-end Framework v2.0.0
 changeset 826 *
 * http://bsdn.beyondbit.com
 *
 * Copyright (c) 2015 xakoy
 * Released under the  license
 */
!function(a){B.registerNameSpace("Mvc");a.extend(a.fn,{dropDownVir:function(){if(!this.length)return null;var b=a.data(this[0],"dropdownvir");return b?b:(b=new Beyondbit.Mvc.Controls.DropDownVir(this.eq(0)),a.data(this[0],"dropdownvir",b),b)},initMvcForm:function(a){var b=this;if(0==b.length)return!1;var c=a;for(var d in c){var e=b.find("[name="+d+"]");if(0!=e.length){var f=e.eq(0);if(f.is("div"))f.attr("dropdownvir")&&f.dropDownVir().val(c[d],!0);else if(f.is(":radio"))e.filter("[value="+c[d]+"]").attr("checked","checked");else if(f.is(":checkbox"))e.filter("[value="+c[d]+"]").attr("checked","true");else if(f.is(":hidden")){if(f.attr("dropdownvir"))continue}else(f.is("select")||f.is("textarea")||f.is(":text"))&&e.val(c[d])}}return b}}),Beyondbit.register("Mvc.Controls",function(){return{DropDownVir:function(b){var c=b,d=this,e=null;c.addClass("dropdownvir").click(function(b){var c=a(b.target);a.browser.msie&&"6.0"==a.browser.version?c.addClass("selected").siblings(".selected").removeClass("selected").end().siblings("input").val(c.attr("value")):c.attr("selected","selected").siblings("[selected]").removeAttr("selected").end().siblings("input").val(c.attr("value")),e&&e.apply(d)}),this.change=function(a){e=a},this.val=function(b,e){var f=a("input[dropdownvir]",c);return b||0==b?(f.val(b).siblings("a[value="+b+"]").trigger("click"),1==e&&f.attr("data-ctl-defalutvalue",b),d):f.val()},this.reset=function(){var b=a("input[dropdownvir]",c),e=b.attr("data-ctl-defalutvalue")||"";return d.val(e),d}}}}),Beyondbit.register("Mvc.Form",function(){return{initFrom:function(b,c){var d=a("#"+b);return 0==d.length?!1:(d.initMvcForm(c),d)}}})}(jQuery),function(a,b){function c(b,c){function j(a){return a&&isLastBroken&&n.length>1&&n.pop(),n[n.length-1]}function k(a){n.push(a)}function l(b){b.each(function(){var b=a(this);m(b,b.attr("belvoly-behavior"))})}function m(a,b){var c=null;switch(b){case"back":c=e;break;case"close":c=f;break;case"close-window":c=g;break;case"search-crumb":c=i;break;case"delete-item":c=h}c&&c(a)}var n=[];k(d(b,c)),this.code=b,this.filter=function(){return k(j().filter("[belvoly-behavior={0}]".bformat(b))),this},this.bind=function(){var b=j().filter(function(){var b=a(this).attr("belvoly-isbehavior");return"true"==b||!b});return l(b),this},this.end=function(){return j(!0),this}}function d(b,c){return b?$behaviors=a("[belvoly-behavior={0}]".bformat(b),c):a("[belvoly-behavior]",c)}function e(a){a.click(function(){return b.Url.back()}),a.attr("belvoly-isbehavior","true")}function f(a){a.click(function(){return 1==b.IsMobile||window.top!=window?void b.Url.back():(window.opener=null,window.open("","_self"),window.close(),b.Url.back())}),a.attr("belvoly-isbehavior","true")}function g(a){a.click(function(){var a=b.Web.WindowManager.get();a&&a.close()}),a.attr("belvoly-isbehavior","true")}function h(c){c.click(function(){function c(){b.ajax({type:h,cache:!1,message:{title:f,actionName:d.del},dataType:i,url:e.attr("href"),data:{},success:function(){return g&&window[g]?window[g].call(e):(e.parent().parent().remove(),!0)}})}var d=b.CultureInfo.Current.getCommonRegional(),e=a(this),f=e.attr("belvoly-behavior-title")||e.attr("title"),g=e.attr("belvoly-behavior-onexecuted"),h=e.attr("belvoly-behavior-ajaxtype")||"POST",i=e.attr("belvoly-behavior-ajaxdatatype"),j=e.attr("belvoly-behavior-isconfirm")||"true";return"true"===j?b.Web.MessageBox.confirm(d.prompt,d.confirmToDoSomeThing.bformat(d.del),function(a){1==a&&c()}):c(),!1}),c.attr("belvoly-isbehavior","true")}function i(b){b.each(function(){var b=a(this),c=b.attr("belvoly-behavior-target");if(c){var d=a(b.attr("belvoly-behavior-target"));if(d){var e=a(":hidden[name='search-crumb-switch']",d).eq(0);a(".curb-expand",b).click(function(){var c=a(this);c.addClass("hide"),a(".curb-compress",b).removeClass("hide"),d.removeClass("hide").slideDown(1e3,function(){}),e.val("1")}),a(".curb-compress",b).click(function(){var c=a(this);c.addClass("hide"),a(".curb-expand",b).removeClass("hide"),d.slideUp(1e3),e.val("0")}),"1"==e.val()&&(d.show(),a(".curb-expand",b).trigger("click"))}b.data("belvoly-isbinded",!0)}}),b.attr("belvoly-isbehavior","true")}var j=b.registerNameSpace("Mvc");j.Behavior=c,a(function(){(new b.Mvc.Behavior).bind()})}(jQuery,Beyondbit),function(a,b){var c=(b.registerNameSpace("Mvc"),b.registerNameSpace("Mvc.Page"));c.bindBehavior=function(a,b){var c=new Behavior(a,b);c.bind()}}(jQuery,Beyondbit);